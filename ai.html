<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>More Insights</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #E8F9F1 0%, #C1E8D0 100%);
      padding: 40px;
      text-align: center;
    }

    h1 {
      color: #1B3B36;
      margin-bottom: 10px;
    }

    .insight-box {
      background: #C1E8D0;
      padding: 25px;
      border-radius: 15px;
      margin: 25px auto;
      max-width: 750px;
      box-shadow: 0 8px 25px rgba(0,0,0,0.2);
      text-align: left;
    }

    .btn-back {
      background: #667eea;
      color: white;
      padding: 12px 20px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
    }

    .btn-back:hover {
      background: #564db0;
    }
  </style>
</head>
<body>

  <h1>More Insights</h1>
  <p>Your smart companion for medication patterns and adherence predictions.</p>

  <div class="insight-box" id="insightBox">
    <h3>Analyzing your data...</h3>
  </div>

  <h3>üìÖ Reminder Calendar</h3>
<div id="calendarContainer" style="margin:20px auto; max-width:700px;"></div>

<!-- Add FullCalendar.js -->
<link href='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css' rel='stylesheet' />
<script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js'></script>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const calendarEl = document.getElementById('calendarContainer');
    const reminders = JSON.parse(localStorage.getItem('reminders')) || [];

    const events = reminders.map(r => ({
      title: r.completed ? '‚úÖ Taken' : '‚ùå Missed',
      start: r.createdAt,
      color: r.completed ? '#4CAF50' : '#E74C3C'
    }));

    const calendar = new FullCalendar.Calendar(calendarEl, {
      initialView: 'dayGridMonth',
      events: events,
      height: 'auto',
      headerToolbar: {
        left: 'title',
        right: 'prev,next'
      }
    });

    calendar.render();
  });
</script>


  <button class="btn-back" onclick="window.location.href='med.rem.html'">‚¨Ö Back to Reminders</button>


  
</script>



  <script>
    const reminders = JSON.parse(localStorage.getItem('reminders')) || [];

    const total = reminders.length;
    const completed = reminders.filter(r => r.completed).length;
    const missed = total - completed;
    const adherenceRate = total ? ((completed / total) * 100).toFixed(1) : 0;

    // Predictive logic
    let eveningMissed = 0, morningMissed = 0;
    reminders.forEach(r => {
      if (!r.completed && r.time) {
        const hr = parseInt(r.time.split(':')[0]);
        if (hr >= 18 || hr < 6) eveningMissed++;
        else if (hr >= 6 && hr < 12) morningMissed++;
      }
    });

    let predictionMsg = '';
    if (adherenceRate < 70) predictionMsg = "‚ö†Ô∏è You're missing several reminders. Try setting simpler schedules or earlier times.";
    else if (eveningMissed > morningMissed) predictionMsg = "üåô You tend to miss more evening doses. Set them a bit earlier or add a louder alert.";
    else if (morningMissed > 0) predictionMsg = "‚òÄÔ∏è Morning reminders are often missed. Consider pairing them with breakfast.";
    else predictionMsg = "‚úÖ Excellent adherence! Keep up your consistent routine.";

    const box = document.getElementById('insightBox');
    box.innerHTML = `
      <h3> Weekly Summary</h3>
      <p><strong>Total Reminders:</strong> ${total}</p>
      <p><strong>Completed:</strong> ${completed}</p>
      <p><strong>Missed:</strong> ${missed}</p>
      <p><strong>Adherence Rate:</strong> ${adherenceRate}%</p>
      <hr>
      <h3> Suggestion </h3>
      <p>${predictionMsg}</p>
    `;
    

    
  </script>

</body>
</html>
